# サブエージェントプロンプトテンプレート

タスクタイプ別のプロンプトテンプレート集。

## 共通フォーマット

すべてのプロンプトは以下の構造を持つ：

```
[ULTRATHINK MODE - 深く検討して実行してください]

タスク: <タスク説明>

## 目的
<具体的な目標>

## 実行内容
<詳細な指示>

## 期待する成果物
- <成果物1>
- <成果物2>

## 報告フォーマット
<タスクタイプ別の形式>
```

---

## research-web: Web調査

### プロンプトテンプレート

```
[ULTRATHINK MODE - 深く検討して実行してください]

タスク: <調査テーマ>についてWeb調査

## 目的
<調査の目的・背景>

## 調査内容
- 検索キーワード: <キーワードリスト>
- 調査観点:
  - <観点1>
  - <観点2>
  - <観点3>

## 評価基準
- <基準1: 例）最新性（2024年以降）>
- <基準2: 例）実績・採用事例の有無>
- <基準3: 例）ドキュメントの充実度>

## 期待する成果物
- 調査結果のサマリー
- 選択肢の比較表
- 推奨案と理由

## 報告フォーマット
### サマリー
<3-5行で調査結果を要約>

### 調査結果

#### 選択肢1: <名前>
- 概要: <説明>
- メリット: <リスト>
- デメリット: <リスト>
- 参照: <URL>

#### 選択肢2: <名前>
...

### 比較表
| 項目 | 選択肢1 | 選択肢2 | 選択肢3 |
|------|---------|---------|---------|
| <基準1> | ... | ... | ... |

### 推奨案
<推奨する選択肢とその理由>

### 参照情報
- <URL1>
- <URL2>
```

---

## research-code: コード調査

### プロンプトテンプレート

```
[ULTRATHINK MODE - 深く検討して実行してください]

タスク: <調査対象>についてコードベース調査

## 目的
<調査の目的・背景>

## 調査範囲
- 対象ディレクトリ: <パス>
- 対象ファイル: <パターン: 例）*.ts, *.tsx>
- 除外: <除外パターン>

## 調査観点
- <観点1: 例）既存の実装パターン>
- <観点2: 例）使用しているライブラリ>
- <観点3: 例）命名規則>

## 期待する成果物
- 既存実装の概要
- 主要なパターン・規則
- 新規実装への示唆

## 報告フォーマット
### サマリー
<3-5行で調査結果を要約>

### 既存実装の概要
- ファイル構成: <説明>
- 主要コンポーネント: <リスト>
- データフロー: <説明>

### 発見したパターン
#### パターン1: <名前>
- 場所: <ファイルパス:行番号>
- 説明: <パターンの説明>
- コード例:
```<言語>
<コードスニペット>
```

#### パターン2: <名前>
...

### 使用ライブラリ・依存関係
- <ライブラリ1>: <用途>
- <ライブラリ2>: <用途>

### 新規実装への示唆
- <示唆1>
- <示唆2>

### 参照ファイル
- <ファイルパス1>
- <ファイルパス2>
```

---

## implement: 実装

### プロンプトテンプレート

```
[ULTRATHINK MODE - 深く検討して実行してください]

タスク: <機能名>の実装

## 目的
<実装の目的・背景>

## 前提情報
<事前調査の結果があれば記載>

## 実装要件
- <要件1>
- <要件2>
- <要件3>

## 制約条件
- <制約1: 例）既存のXXパターンに従う>
- <制約2: 例）XXライブラリを使用>

## 実装方針
<具体的なアプローチ>

## 期待する成果物
- 実装コード
- 変更ファイル一覧
- 実装判断の記録

## 報告フォーマット
### サマリー
<3-5行で実装内容を要約>

### 変更ファイル一覧
| ファイル | 変更種別 | 概要 |
|----------|----------|------|
| <パス> | 新規/修正 | <説明> |

### 実装詳細

#### <ファイル1>
- 変更内容: <説明>
- 判断理由: <なぜこの実装にしたか>

#### <ファイル2>
...

### 実装判断の記録
- <判断1: 例）XXの代わりにYYを使用した理由>
- <判断2>

### 動作確認
- <確認項目1>: <結果>
- <確認項目2>: <結果>

### 残課題・注意点
- <課題1>
- <注意点1>
```

---

## build: ビルド

### プロンプトテンプレート

```
[ULTRATHINK MODE - 深く検討して実行してください]

タスク: プロジェクトのビルド実行

## 目的
<ビルドの目的: 例）実装確認、リリース準備>

## ビルド情報
- プロジェクトパス: <パス>
- ビルドコマンド: <コマンド>
- 環境: <開発/本番>

## 期待する結果
- ビルド成功
- 警告なし（または許容範囲内）

## エラー時の対応
- エラー内容を分析
- 修正案を提示
- 自動修正可能なら実行

## 報告フォーマット
### サマリー
<ビルド結果の要約>

### ビルド結果
- 状態: 成功/失敗
- 所要時間: XX秒
- 警告数: X件
- エラー数: X件

### 警告詳細（あれば）
| ファイル | 警告内容 | 対応要否 |
|----------|----------|----------|
| <パス> | <内容> | 要/不要 |

### エラー詳細（あれば）
#### エラー1
- ファイル: <パス>
- 内容: <エラーメッセージ>
- 原因分析: <分析>
- 修正案: <提案>

### 次のアクション
- <アクション1>
- <アクション2>
```

---

## test: テスト

### プロンプトテンプレート

```
[ULTRATHINK MODE - 深く検討して実行してください]

タスク: テストの実行

## 目的
<テストの目的: 例）実装検証、リグレッション確認>

## テスト情報
- テストコマンド: <コマンド>
- 対象範囲: <全体/特定ファイル/特定テスト>
- カバレッジ要件: <あれば>

## 期待する結果
- 全テストパス
- カバレッジ基準達成

## 失敗時の対応
- 失敗原因を分析
- 修正案を提示

## 報告フォーマット
### サマリー
<テスト結果の要約>

### テスト結果
- 状態: 成功/失敗
- 総テスト数: X
- 成功: X
- 失敗: X
- スキップ: X
- カバレッジ: XX%

### 失敗テスト詳細（あれば）
#### テスト1: <テスト名>
- ファイル: <パス>
- 期待値: <期待値>
- 実際値: <実際値>
- 原因分析: <分析>
- 修正案: <提案>

### カバレッジ詳細（要求があれば）
| ファイル | 行カバレッジ | 分岐カバレッジ |
|----------|--------------|----------------|
| <パス> | XX% | XX% |

### 次のアクション
- <アクション1>
- <アクション2>
```

---

## review: コードレビュー

### プロンプトテンプレート

```
[ULTRATHINK MODE - 深く検討して実行してください]

タスク: コードレビュー

## 目的
<レビューの目的: 例）PR確認、実装品質確認>

## レビュー対象
- 対象: <PRのURL/ファイルパス/差分>
- 範囲: <全体/特定ファイル>

## レビュー観点
- コード品質（可読性、保守性）
- ロジックの正確性
- エラーハンドリング
- パフォーマンス
- セキュリティ
- テストカバレッジ
- 既存パターンとの整合性

## 重点領域（あれば）
- <重点1>
- <重点2>

## 報告フォーマット
### サマリー
<レビュー結果の要約>

### 総合評価
- 承認可否: 承認/要修正/要議論
- 品質スコア: X/10
- 主要な懸念: <あれば>

### 指摘事項

#### 必須修正（Must Fix）
##### 指摘1
- ファイル: <パス:行番号>
- 種別: <バグ/セキュリティ/パフォーマンス等>
- 内容: <指摘内容>
- 修正案: <提案>

#### 推奨修正（Should Fix）
##### 指摘1
- ファイル: <パス:行番号>
- 種別: <可読性/保守性等>
- 内容: <指摘内容>
- 修正案: <提案>

#### 検討事項（Consider）
- <検討事項1>
- <検討事項2>

### 良い点
- <良い点1>
- <良い点2>

### 次のアクション
- <アクション1>
- <アクション2>
```

---

## 使用例

### Web調査の例

```
Task(
  subagent_type: "general-purpose",
  model: "opus",
  prompt: "[ULTRATHINK MODE - 深く検討して実行してください]

タスク: Reactのフォーム管理ライブラリについてWeb調査

## 目的
新規フォーム実装に最適なライブラリを選定する

## 調査内容
- 検索キーワード: React form library 2024, React Hook Form, Formik, react-final-form
- 調査観点:
  - バンドルサイズ
  - TypeScriptサポート
  - バリデーション機能
  - 学習コスト

## 評価基準
- 最新性（2024年以降も活発にメンテナンス）
- 採用事例の多さ
- ドキュメントの充実度
- パフォーマンス

## 期待する成果物
- 主要ライブラリの比較
- 推奨案と理由

## 報告フォーマット
[上記のresearch-webフォーマットに従う]
",
  description: "Reactフォームライブラリ調査",
  run_in_background: true
)
```
