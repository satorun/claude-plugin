---
name: orchestrating-tasks
description: 作業指示（調べて/探して/実装して/ビルドして/テストして/レビューして）や承認（やって/進めて/OK）でサブエージェントに委譲。コンテキスト効率化。
allowed-tools:
  - Task
  - TaskOutput
  - TodoWrite
  - Read
  - Write
  - Edit
  - Bash(date:*)
  - Bash(mkdir:*)
  - Skill
---

# 作業のオーケストレーション

具体的な作業をサブエージェントに委譲し、メインコンテキストをユーザーとのコミュニケーションと全体管理に集中させる。

## 使用タイミング

以下の作業指示があった場合にこのスキルを使用する：
- **調査・探索**：「〇〇を調べて」「〇〇を探して」「事例を調査して」「ドキュメントを確認して」「どこにあるか探して」
- **実装**：「〇〇を実装して」「この機能を作って」
- **ビルド**：「ビルドして」「ビルドを確認して」
- **テスト**：「テストを実行して」「テストを書いて」
- **レビュー**：「このコードをレビューして」「PRを確認して」
- **複合作業**：「調査して実装して」「実装してテストまで」
- **承認・再開**：「やって」「進めて」「OK」「いいよ」「実行して」（実行計画提示後の承認）

## 基本原則

### コンテキストの役割分担

| コンテキスト | 役割 |
|--------------|------|
| メイン | ユーザーとのコミュニケーション、全体管理、判断、承認 |
| サブエージェント | 具体的な作業の実行、詳細な調査、コード生成 |

### サブエージェントの特徴

- **ultrathinkモード**で深く検討して実行
- **model: opus**で高精度な出力
- 作業完了後に構造化された結果を報告
- メインコンテキストを消費しない

## タスクタイプと並列化

| タイプ | 説明 | 並列化 |
|--------|------|--------|
| `research-web` | Web事例調査、ドキュメント検索 | 可能 |
| `research-code` | 既存コードベースの調査 | 可能 |
| `root-cause-analysis` | エラーや問題の原因分析 | 可能 |
| `implement` | コード実装 | 依存関係による |
| `build` | プロジェクトビルド | 実装後 |
| `test` | テスト実行 | 実装後 |
| `review` | コードレビュー | 実装後 |

> 詳細な依存関係図やタスクタイプ判定表は [reference/quick-reference.md](./reference/quick-reference.md) を参照

## ワークフロー概要

1. **作業指示の分析** - タスクタイプと依存関係を特定
2. **実行計画の提示** - ユーザーに承認を求める
3. **サブエージェントの起動** - バックグラウンドで並列実行
4. **結果の収集** - TaskOutputで結果を取得
5. **結果報告とネクストアクション** - 次のステップを提案

> 詳細なワークフローは [reference/workflow.md](./reference/workflow.md) を参照

## エラーハンドリング

サブエージェントのタイムアウト、失敗、依存関係違反、部分的成功に対応。

> 詳細は [reference/error-handling.md](./reference/error-handling.md) を参照

## ベストプラクティス

- **タスク粒度**：5〜30分程度が最適
- **並列実行**：最大3〜5個の同時サブエージェント
- **コンテキスト効率**：必要な情報のみをサブエージェントに渡す
- **Ultrathinkモード**：サブエージェントには常に`[ULTRATHINK MODE]`を含める

> 並列化判断基準やその他の詳細は [reference/best-practices.md](./reference/best-practices.md) を参照

## 注意事項

- このスキルは**オーケストレーション**を行い、直接実装はしない
- サブエージェントがultrathinkモードで実際の作業を行う
- 実行開始前にユーザー承認が必要
- 結果報告には必ずネクストアクションを含める
- メインコンテキストは判断とコミュニケーションに集中

## 関連スキル

- **building-task-prompts**: サブエージェント用プロンプト生成（本スキルから利用）

## 参照ドキュメント

- [ワークフロー詳細](./reference/workflow.md) - 実行計画、サブエージェント起動、結果収集
- [エラーハンドリング](./reference/error-handling.md) - タイムアウト、失敗、依存関係違反への対応
- [ベストプラクティス](./reference/best-practices.md) - タスク粒度、並列化判断基準
- [クイックリファレンス](./reference/quick-reference.md) - タスクタイプ判定表、依存関係図
